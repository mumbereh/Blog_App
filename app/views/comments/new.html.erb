<%= form_with model: [:user, @post, @comment], url: (@comment.new_record? ? user_post_comments_path(user_id: current_user, post_id: @post) : user_post_comment_path(user_id: current_user, post_id: @post, id: @comment)), method: (@comment.new_record? ? :post : :patch), data: { turbo: false }, local: true do |f| %>
  <div>
    <%= f.label :text %><br>
    <%= f.text_field :text %><br>
    <%= f.hidden_field :user_id, value: current_user.id %>
    <%= f.hidden_field :post_id, value: @post.id %>
    <%= f.submit @comment.new_record? ? "Comment" : "Update Comment" %>
  </div>
<% end %>
